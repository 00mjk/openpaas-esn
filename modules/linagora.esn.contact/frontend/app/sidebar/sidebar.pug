.lv-item.sidebar-title
  .media
    .pull-right(ng-if='$ctrl.status === "loaded"')
      .lv-actions.actions
        li.dropdown
          a(href='', data-toggle='dropdown', aria-expanded='true', title=__('New address book'))
            i.mdi.mdi-plus
          ul.dropdown-menu.dropdown-menu-right
            li
              a(
                href='',
                esn-modal-launcher="/contact/app/addressbook/create/contact-addressbook-create",
                controller='ContactAddressbookCreateController',
                controller-as='$ctrl',
                backdrop='static'
              )
                | #{__('New address book')}
            li
              contact-addressbook-shared-configuration
            li
              a(href='/#/controlcenter/accounts') #{__('Import contacts')}
            li
              a(
                href='',
                esn-modal-launcher="/contact/app/addressbook/import/contact-addressbook-import",
                controller='ContactAddressbookImportController',
                controller-as='$ctrl',
                backdrop='static'
              )
                | #{__('Import contacts from file')}
    .media-body
      .title
        .text #{__('Contacts')}

.text-center(
  openpaas-logo-spinner,
  spinner-start-active="1",
  spinner-size="0.4",
  ng-if='$ctrl.status === "loading"'
)

.error-message(ng-if='$ctrl.status === "error"')
  i.mdi.mdi-alert-circle
  span.message
    | #{__('Something went wrong, please try again later')}
  br
  button.btn.btn-primary.btn-retry(ng-click="$ctrl.reload()") #{__('Retry')}

div(ng-if='$ctrl.status === "loaded"')
  .listview
    .addressbook-item.clickable.waves-effect.waves-classic(
      title=__('All contacts'),
      ui-sref-active="selected",
      ui-sref="contact.addressbooks({ bookName: null })"
    )
      .addressbook-icon.all-contacts
        i.mdi.mdi-folder-multiple
      .title.ellipsis
        span #{__('All contacts')}

  hr

  .listview
    contact-sidebar-addressbooks-list(title="'My address books'", addressbooks='$ctrl.userAddressbooks')

    contact-sidebar-addressbooks-list.shared-addressbooks(title="'Shared address books'", addressbooks='$ctrl.sharedAddressbooks')
